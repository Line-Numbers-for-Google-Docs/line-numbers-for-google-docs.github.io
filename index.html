<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Line Numbers for Google Docs</title>
  <link rel="icon" href="_media/favicon.ico">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="description" content="Description">
  <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <link rel="stylesheet" href="//unpkg.com/docsify/lib/themes/vue.css">
</head>
<body>
  <div id="app"></div>
  <script>
    window.$docsify = {
      name: 'Line Numbers for GDocs',
      repo: 'https://github.com/Line-Numbers-for-Google-Docs',
      coverpage: true,
      loadSidebar: true,
      ga: 'UA-44179721-6',

      plugins: [
        function(hook, vm) {
          hook.ready(function() {
            // Remove underline for anchors
            var anchors = document.getElementsByClassName('anchor');
            for (let i = 0; i < anchors.length; i++) {
              const anchor = anchors[i];
              anchor.style['text-decoration'] = 'none';
            }
          });
        },
        function(hook, vm) {
          hook.ready(function() {
            var contactFrom = document.getElementById('contact-form');

            if (contactFrom) {
              contactFrom.addEventListener('submit', function(event) {
                event.preventDefault();

                // generate the contact number value
                this.contact_number.value = Math.random() * 100000 | 0;

                var submitButton = document.getElementById('submit');
                submitButton.disabled = true;
                submitButton.value = "SENDING...";

                var inputs = contactFrom.querySelectorAll('input');
                for (let i = 0; i < inputs.length; i++) {
                  const input = inputs[i];
                  input.disabled = true;
                }
                var textAreas = contactFrom.querySelectorAll('textarea');
                for (let i = 0; i < textAreas.length; i++) {
                  const textArea = textAreas[i];
                  textArea.disabled = true;
                }

                function failedToSend() {
                  // Failed to send...
                  submitButton.value = "FAILED TO SEND..."
                  submitButton.style.background = "#ED4337";
                  submitButton.style.color = "white";
                }

                const url = "https://linenumbers.app/api/v1/sendMail";
                fetch(url, {
                    method : "POST",
                    body: new FormData(contactFrom),
                    headers: {'Content-Type': 'application/json'}
                }).then((response) => {
                  console.log("Response", response);
                  if (response.status == 200) {
                    // Successfully Sent
                    submitButton.value = "SENT";
                    submitButton.style.background = "#BFE3B4";
                  } else {
                    failedToSend();
                  }
                }).catch((err) => {
                  console.log("Error", err);
                  failedToSend();
                });
              });
            }
          });
        }
      ]
    }
  </script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js" data-ga="UA-44179721-6"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/emoji.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/ga.min.js"></script>
</body>
</html>
